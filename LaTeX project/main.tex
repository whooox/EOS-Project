\documentclass[twoside]{report}
% \documentclass{report}
\usepackage[utf8]{inputenc}
\usepackage{graphicx}% Required for inserting images
%\usepackage{CormorantGaramond}
\usepackage{mathptmx}
\usepackage[a4paper,
            left=50mm,
            right=30mm,
            top=40mm,
            bottom=50mm,
            footskip=.25in]{geometry}
\usepackage{blindtext}
\usepackage{multicol}
\usepackage{datetime}
\usepackage{titlesec}
\usepackage{type1cm}
\usepackage{xparse}
\usepackage{expl3}
\usepackage{setspace}
\usepackage{lettrine}
\usepackage[
    bookmarks=true,
    bookmarksopen=true,
    bookmarksnumbered=true,
    bookmarksopenlevel=1,
    pdfpagelabels=true,
    colorlinks=true,
    linkcolor=red,
    urlcolor=magenta,
    anchorcolor=black,
    citecolor=cyan,
    filecolor=magenta,
    menucolor=red,
    plainpages=false,
    hypertexnames=true,
    linktocpage=true,
]{hyperref}
\usepackage{siunitx}

\usepackage{lastpage}
\usepackage{fancyhdr}
\usepackage{afterpage}
\usepackage{hyperref}
\usepackage[acronym]{glossaries}

\usepackage[version=4]{mhchem}

\graphicspath{ {figures/} }
\usepackage{array}

\usepackage[backend=bibtex]{biblatex}
\addbibresource{citations.bib}

\usepackage[T1]{fontenc}

% \usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{mathtools}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{color}
\usepackage{tcolorbox}
\usepackage{mdframed} %nice frames
% \usepackage{fontspec} this doesn't work and its fucking frustrating
\usepackage{inconsolata}

\usepackage{booktabs}
\usepackage{esint}
\usepackage{makecell}
\usepackage{tikz}
\usetikzlibrary{calc}
\usetikzlibrary{matrix}
\usepackage{longtable}

\usepackage{pdflscape}
\usepackage[svgnames]{xcolor}
\usepackage{colortbl}%
  \newcommand{\myrowcolour}{\rowcolor[gray]{0.925}}

% \usepackage{mathalfa}

% \usepackage[grid]{eso-pic}
% \usepackage{kantlipsum}
% USEFUL TO SEE WHERE EVERYTHING IS
%\usepackage{show frame}


%----------------------------------------------------------------------------------------%
% SETUP OF THE BACKEND


\titleformat{\chapter}{\normalfont\large\bfseries}{\thechapter $\hskip1em$ $\mid$}{1em}{}
\titlespacing*{\chapter}{10pt}{5mm}{3mm}

\titleformat{\section}{\normalfont\normalsize\bfseries}{\thesection}{1em}{}
\titlespacing*{\section}{20pt}{10mm}{3mm}

\titleformat{\subsection}{\normalfont\normalsize}{\thesubsection}{1em}{}
\titlespacing*{\subsection}{20pt}{10mm}{3mm}

% Set line spacing to 1.5
\setstretch{0.7}

\setlength\parindent{24pt}

\DeclareGraphicsExtensions{.pdf,.jpeg,.png}


% \pagenumbering{gobble} % Suppresses the page numbering
\pagestyle{fancy}
% Pied de page
\fancyfoot[L]{}
\fancyfoot[R]{}
\fancyfoot[C]{}
% \fancyfoot[C]{\it Page \thepage\ of \pageref{LastPage}}
% \fancyhead[ro, le]{\it Page \thepage\ of \pageref{LastPage}}
% \fancyhead[L]{}
% \fancyhead[R]{}
% \fancyhead[C]{}

\renewcommand{\headrulewidth}{0pt} % Deletes the horizontal line of the header
\newcommand{\innerp}[2]{\left\langle #1 #2 \right\rangle}
\newcommand{\proj}[2]{\left\langle #1 , #2 \right\rangle}

% Code snippet setup
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.99,1}
\definecolor{framecolor}{rgb}{0.5058823529411764,0.7098039215686275,0.6509803921568628}
% \definecolor{rulecolor}{rgb}{0.92,0.98,1}
\definecolor{rulecolor}{rgb}{0.9647058823529412, 1, 0.8509803921568627}
\definecolor{blackblack}{rgb}{0,0,0}
\definecolor{whitewhite}{rgb}{1,1,1} % Light gray for the frame
\definecolor{MaterialGrey}{rgb}{0.25882352941176473,0.25882352941176473,0.25882352941176473}
\definecolor{vibrant}{rgb}{0.011764705882352941, 0.6509803921568628, 0.5647058823529412}

% APDL Definition
\lstdefinelanguage{APDL}
{
morekeywords ={K,SOLU,SOLVE,FINISH,csys,cmsel,esln,esel,nsle,cm,sfe,alls,kbc,s,r,x,all,HFLU,ne,then,elem,count,temp,elem,nint},keywordstyle = \bfseries\color{vibrant},
classoffset = 1,
morekeywords={DK,D,FK,ANTYPE,PSTRES,BUCOPT,EXPASS,MXPAND,do,if,enddo,endif,get},keywordstyle = \color{blue},
classoffset = 0,
sensitive=false,
morecomment=[l]{!},
morecomment=[s]{/*}{*/},
morestring
=[b]",
}

% Define the listing style
\lstset{
    basicstyle=\ttfamily, 
    keywordstyle=\color{blue},
    commentstyle=\color{gray},
    stringstyle=\color{red},
    numbers=right,
    numberstyle=\ttfamily\normalsize\color{blackblack},
    stepnumber=1,
    numbersep=-10pt,
    backgroundcolor=\color{backcolour},
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    % frame=single,
    tabsize=4,
    captionpos=b,
    breaklines=true,
    breakatwhitespace=false,
    % title=\lstname
}

% Define a tcolorbox style for listings
\tcbuselibrary{listingsutf8}
\newtcblisting{mylisting}[2][]{
    listing only,
    listing style=mystyle,
    colback=backcolour,
    colframe=rulecolor,
    fonttitle=\bfseries,
    title=#2,
    #1
}

\newtcblisting[auto counter]{sexylisting}[2][]{
    sharp corners,
    fonttitle=\ttfamily\bfseries\color{blackblack},
    colframe={whitewhite},
    colback=backcolour,
    listing only, 
    listing options={basicstyle=\ttfamily,language=APDL}, 
    title=Listing \thetcbcounter: #2, #1
}

\makeatletter
\providecommand\add@text{}
\newcommand\tagaddtext[1]{%
  \gdef\add@text{#1\gdef\add@text{}}}% 
\renewcommand\tagform@[1]{%
  \maketag@@@{\llap{\add@text\quad}(\ignorespaces#1\unskip\@@italiccorr)}%
}
\makeatother

% SETUP OF THE TABLES
\newcommand{\ra}[1]{\renewcommand{\arraystretch}{#1}}



%----------------------------------------------------------------------------------------%
% ACRONYMS

\makenoidxglossaries

\newacronym{OP1}{OP1}{Operation Phase 1}
\newacronym{OP2}{OP2}{Operation Phase 2}
\newacronym{W7-X}{W7-X}{Wendelstein 7-X}
\newacronym{PFCs}{PFCs}{Plasma Facing Components}
\newacronym{BCs}{BCs}{Boundary Conditions}
\newacronym{HS}{HS}{Heat Shield}
\newacronym{ECRH}{ECRH}{Electron Cyclotron Resonance Heating}
\newacronym{NBI}{NBI}{Neutral Beam Injection}
\newacronym{CuCrZr}{CuCrZr}{Copper Nickel Zirconium}
\newacronym{TZM}{TZM}{Titanium Zirconium Molybdenum}
\newacronym{SS}{SS}{Stainless Steel}
\newacronym{Sigraflex}{Sigraflex}{Sigraflex}
\newacronym{BM}{BM}{Baffle Module}
\newacronym{PV}{PV}{Plasma Vessel}
\newacronym{KiP}{KiP}{Komponenten im Plasmagefaeß}
\newacronym{ELMs}{ELMs}{Edge Localized Modes}
\newacronym{FE}{FE}{Finite Element}

%----------------------------------------------------------------------------------------%
% SETUP OF THE DOCUMENT
\begin{document}
\begin{titlepage}
    \centering
    \includegraphics[scale=0.075, angle=0]{figures/logo.jpg}\\
    \vskip2cm
    {\bfseries\normalsize
        \textsc{Institut National des Sciences Appliquées de Strasbourg}
        \\
    }
    {\small
        Department of mechanical engineering\\
    }
    {\bfseries\normalsize
        \textsc{Université de Strasbourg}
        \\
    }
    {\small
        Faculty of Physics and Engineering\\
    }
    \vskip3cm
    {\normalsize
        Master’s Thesis submitted in fulfillment of the requirements for the degrees of\\
        \it Master of Engineering\\
        \it Master of Science\\
    }
     \vskip1cm
    {\bfseries\huge
        Thermal and structural finite element analysis of ECRH reflector tile of Wendelstein 7-X\\
    }
    \vskip3cm
    \setlength{\columnsep}{0cm}
    \begin{multicols}{2}
        \begin{flushleft}
        {\it\small{Author:}}
        \\
        {\bfseries\large{Nicolas Olive-Leriche}}
        \\ 
        {\normalsize{Mechanical engineering/Applied physics and physical engineering}}
        \\
        \end{flushleft}
    \columnbreak
        \begin{flushright}
        {\it\small{Academic supervisor:}}
        \\
        {\bfseries\normalsize{MdC. \textsc{Mathieu Solar}}}
        \\ 
        {\normalsize{INSA Strasbourg}}
        \\
        {\normalsize{Institut Charles Sadron}}
        \vskip.25cm
        {\it\small{Professional tutor:}}
        \\
        {\bfseries\normalsize{\textsc{Mikhail Khokhlov}}}
        \\ 
        {\normalsize{Max Planck Institute for Plasma Physics}}
        \\
        \end{flushright}
    \end{multicols}
    \vskip1cm
    {\small
        Greifswald, \the\year\\
    }
\end{titlepage}

\pagenumbering{roman}
\fancyhead[ro, le]{\it Page \thepage}
\fancypagestyle{plain}{
\fancyhf{} % Efface les en-têtes et pieds de page actuels
\fancyfoot[ro, le]{}
\fancyhead[ro, le]{\it Page \thepage} % Ajoute le numéro de page à droite
\renewcommand{\headrulewidth}{0pt} % Supprime la ligne d'en-tête
}

%\afterpage{\null\newpage}
\afterpage{\null\newpage}
% \chapter*{Acknowledgement} TITLE INCLUDED IN THE .TEX FILE
\include{chapters/Acknowledgment}
\newpage
\chapter*{Abstract}
\newpage
\chapter*{Résumé}
\newpage
% \chapter*{Table of content}
\tableofcontents
\newpage
\listoffigures
\newpage

% [type=\acronymtype]
\printnoidxglossaries
\printacronyms

\newpage
\fancyhead[ro, le]{\it Page \thepage\ of \pageref{LastPage}}
\pagenumbering{arabic}
\fancypagestyle{plain}{
\fancyhf{} % Efface les en-têtes et pieds de page actuels
\fancyfoot[ro, le]{}
\fancyhead[ro, le]{\it Page \thepage\ of \pageref{LastPage}} % Ajoute le numéro de page à droite
\renewcommand{\headrulewidth}{0pt} % Supprime la ligne d'en-tête
}

% Chapter implementation
\include{chapters/ch_1/ch_1}
\newpage
\include{chapters/ch_2/ch_2}
\newpage
\include{chapters/ch_3/ch_3}
\newpage
\include{chapters/ch_4/ch_4}
\newpage
\include{chapters/ch_5/ch_5}
\newpage
\include{chapters/ch_6/ch_6}


% Generate bibliography
\printbibliography

\end{document}
